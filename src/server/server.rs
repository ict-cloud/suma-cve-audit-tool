use warp::Filter;

use crate::server::reject;
use crate::server::routes;

pub type Reslt<T> = std::result::Result<T, Box<dyn std::error::Error + Send + Sync>>;

//#[tokio::main]
pub async fn serv() -> Reslt<()> {

    // define all routes
    let rtes = routes::stat_routes().or(routes::api_routes());
    Ok(warp::serve(rtes.recover(reject::handle_rejection)).run(([127, 0, 0, 1], 8081)).await)
}