use web_sys::*;
use log::*;
use yew::prelude::*;

#[function_component(AuditForm)]
pub fn audit_form() -> Html {

  let onsubmit = |e: FocusEvent| {
    e.prevent_default();
    let form: HtmlFormElement = e.target_unchecked_into();
    let form_data = FormData::new_with_form(&form);
    log::info!("form_data {:?}", form_data.unwrap().get_all("auditor"));
     // let body = JobAdResponse {
                //     title: self.job_name.clone(),
                //     url: self.job_url.to_owned(),
                // };
                // let req = Request::post("http://localhost:8081/api/create-job")
                //     .header("Content-Type", "application/json")
                //     .body(Json(&body))
                //     .expect("can make req to backend");

                // let cb = self.link.callback(
                //     |response: Response<Json<Result<JobAdResponse, anyhow::Error>>>| {
                //         let Json(data) = response.into_body();
                //         Msg::Resp(data)
                //     },
                // );
    ()
  };

  html!{
    <div class="col-md-7 col-lg-8">
      <form method="post" onsubmit={onsubmit} class="needs-validation">
        <input type="text" name="id" id="id" hidden=true/>
        <div class="row mb-6">
          <div class="col-sm-6">
            <label for="auditor" class="form-label">{"Auditor"}</label>
            <input type="text" name="auditor" id="auditor" class="form-control" />
          </div>
          <div class="col-sm-6">
            <label for="resp" class="form-label">{"Responsible"}</label>
            <input type="text" name="resp" id="resp" class="form-control" />
          </div>
        </div>
        <div class="col-12">
          <label for="assess_score" class="form-label">{"Score"}</label>
          <input type="text" name="assess_score" id="assess_score" class="form-control"/>
        </div>
        <div class="col-12">
          <label for="status" class="form-label">{"Status"}</label>
          <select name="status" id="status" class="form-select">
            <option>{"New"}</option>
            <option>{"In Progress"}</option>
            <option>{"Done"}</option>
          </select>
        </div>
        <div class="col-12 mb-6">
          <label for="assessment_verd" class="form-label">{"Assessment"}</label>
          <select name="assessment_verd" id="assessment_verd" class="form-select">
            <option>{"Not affected"}</option>
            <option>{"Regular Patching"}</option>
            <option>{"Immediate Patching"}</option>
            <option>{"Patched"}</option>
            <option>{"Unclear"}</option>
          </select>
        </div>
        <div class="col-12 mb-3">
          <label for="assess_comment" class="form-label">{"Remarks"}</label>
          <textarea name="assess_comment" id="assess_comment" class="form-control" rows="4"></textarea>
        </div>
        <div class="col-12">
          <button type="submit" class="btn btn-primary">{"Save"}</button>
        </div>
      </form>
    </div>
  }
}